"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[908],{1816:function(e,n,t){var s=t(3535),r=t.n(s);let o=new class{isClientSide(){return!0}getProfile(){let e=this.getToken();if(e)try{return r()(e)}catch(e){console.error("Error decoding the token:",e)}return null}loggedIn(){let e=this.getToken();return!!e&&!this.isTokenExpired(e)}isTokenExpired(e){try{let n=r()(e);if(n.exp<Date.now()/1e3)return!0;return!1}catch(e){return!1}}getToken(){return this.isClientSide()?localStorage.getItem("id_token"):null}login(e){this.isClientSide()&&(localStorage.setItem("id_token",e),window.location.assign("/"))}logout(){this.isClientSide()&&(localStorage.removeItem("id_token"),window.location.assign("/"))}};n.Z=o},9390:function(e,n,t){t.d(n,{Bv:function(){return _},IY:function(){return g},O2:function(){return f},OU:function(){return b},e:function(){return p},ns:function(){return v},os:function(){return k},xR:function(){return w},xx:function(){return N}});var s=t(2805),r=t(7056);function o(){let e=(0,s._)(["\n  mutation CreateUser($input: CreateUserInput!) {\n    createUser(input: $input) {\n      token\n      user {\n        _id\n        username\n        email\n      }\n    }\n  }\n"]);return o=function(){return e},e}function a(){let e=(0,s._)(["\n  mutation Login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n        email\n      }\n    }\n  }\n"]);return a=function(){return e},e}function i(){let e=(0,s._)(["\n  mutation UpdateUser($input: UpdateUserInput!, $_id: ID!) {\n    editUser(input: $input, _id: $_id) {\n      token\n      user {\n        username\n        email\n        firstName\n        lastName\n        bio\n        pfp\n        followers {\n          _id\n        }\n        following {\n          _id\n        }\n      }\n    }\n  }\n"]);return i=function(){return e},e}function l(){let e=(0,s._)(["\n  mutation Mutation($userId: ID!, $followerId: ID!) {\n    addFollower(userId: $userId, followerId: $followerId) {\n      _id\n      followers {\n        _id\n      }\n    }\n  }\n"]);return l=function(){return e},e}function d(){let e=(0,s._)(["\n  mutation RemoveFollower($userId: ID!, $followerId: ID!) {\n    removeFollower(userId: $userId, followerId: $followerId) {\n      user {\n        followers {\n          _id\n        }\n      }\n    }\n  }\n"]);return d=function(){return e},e}function c(){let e=(0,s._)(["\n  mutation AddPost($userId: ID!, $input: newPostInput!) {\n    addPost(userId: $userId, input: $input) {\n      _id\n      preview\n      title\n      body\n      createdAt\n      comments {\n        _id\n        body\n        createdAt\n        username\n      }\n      user {\n        _id\n        username\n        pfp\n        firstName\n        lastName\n      }\n      hashtags {\n        hashtagText\n        category\n      }\n      likes {\n        _id\n      }\n    }\n  }\n"]);return c=function(){return e},e}function u(){let e=(0,s._)(["\n  mutation AddComment($username: String!, $body: String!, $postId: String!) {\n    addComment(username: $username, body: $body, postId: $postId) {\n      _id\n      title\n      body\n      comments {\n        username\n        body\n      }\n    }\n  }\n"]);return u=function(){return e},e}function m(){let e=(0,s._)(["\n  mutation AddCommentToPost(\n    $username: String!\n    $body: String!\n    $postId: String!\n  ) {\n    addComment(username: $username, body: $body, postId: $postId) {\n      _id\n      body\n      title\n      createdAt\n      comments {\n        _id\n        body\n        createdAt\n        username\n      }\n    }\n  }\n"]);return m=function(){return e},e}function x(){let e=(0,s._)(["\n  mutation LikePost($input: likePostInput, $postId: String!, $userId: String!) {\n    likePost(input: $input, postId: $postId, userId: $userId) {\n      _id\n      user {\n        _id\n        username\n      }\n      post {\n        _id\n        title\n        likes {\n          _id\n        }\n      }\n      username\n      pfp\n      firstName\n      lastName\n      preview\n    }\n  }\n"]);return x=function(){return e},e}function h(){let e=(0,s._)(["\n  mutation UnlikePost($postId: String!, $userId: String!) {\n    unlikePost(postId: $postId, userId: $userId) {\n      _id\n      user {\n        _id\n      }\n      post {\n        _id\n      }\n      username\n      pfp\n      firstName\n      lastName\n      preview\n    }\n  }\n"]);return h=function(){return e},e}let p=(0,r.Ps)(o()),f=(0,r.Ps)(a()),g=(0,r.Ps)(i()),b=(0,r.Ps)(l()),w=(0,r.Ps)(d()),k=(0,r.Ps)(c());(0,r.Ps)(u());let v=(0,r.Ps)(m()),N=(0,r.Ps)(x()),_=(0,r.Ps)(h())},909:function(e,n,t){t.d(n,{L5:function(){return g},Nw:function(){return h},QI:function(){return p},Rx:function(){return x},hl:function(){return f}});var s=t(2805),r=t(7056);function o(){let e=(0,s._)(["\n  query Query($userId: ID!) {\n    getUserChats(userId: $userId) {\n      _id\n      username\n      chats {\n        _id\n        members {\n          _id\n          username\n          pfp\n          firstName\n          lastName\n        }\n        messages {\n          userId\n          createdAt\n          body\n          _id\n        }\n      }\n    }\n  }\n"]);return o=function(){return e},e}function a(){let e=(0,s._)(["\n  query Query($chatId: ID!) {\n    getChatById(chatId: $chatId) {\n      members {\n        _id\n        username\n      }\n      createdAt\n      messages {\n        body\n        createdAt\n        userId\n        _id\n      }\n    }\n  }\n"]);return a=function(){return e},e}function i(){let e=(0,s._)(["\n  query GetAllPosts {\n    getAllPosts {\n      _id\n      preview\n      title\n      body\n      createdAt\n      comments {\n        _id\n        body\n        username\n        createdAt\n      }\n      user {\n        _id\n        pfp\n        firstName\n        lastName\n        username\n        email\n        followers{\n          _id\n        }\n      }\n      likes {\n        _id\n        user {\n          _id\n          pfp\n          firstName\n          lastName\n          username\n        }\n        post {\n          _id\n          preview\n        }\n      }\n      hashtags {\n        hashtagText\n        category\n      }\n    }\n  }\n"]);return i=function(){return e},e}function l(){let e=(0,s._)(["\n  query GetPost($postId: ID!) {\n    getPost(postId: $postId) {\n      _id\n      preview\n      media\n      title\n      body\n      createdAt\n      comments {\n        _id\n        body\n        username\n        createdAt\n      }\n      user {\n        _id\n        pfp\n        firstName\n        lastName\n        username\n        email\n      }\n      likes {\n        _id\n        user {\n          _id\n          pfp\n          firstName\n          lastName\n          username\n        }\n        post {\n          _id\n          preview\n        }\n      }\n      hashtags {\n        hashtagText\n        category\n      }\n    }\n  }\n"]);return l=function(){return e},e}function d(){let e=(0,s._)(["\n  query GetAllUsers {\n    getAllUsers {\n      _id\n      username\n      firstName\n      lastName\n      pfp\n      posts {\n        _id\n        title\n        preview\n        body\n        hashtags {\n          hashtagText\n          category\n        }\n        likes {\n          _id\n          username\n          pfp\n          firstName\n          lastName\n          preview\n        }\n        comments {\n          _id\n          body\n          username\n          createdAt\n        }\n        createdAt\n      }\n      followers {\n        _id\n      }\n      following {\n        _id\n      }\n    }\n  }\n"]);return d=function(){return e},e}function c(){let e=(0,s._)(["\n  query GetAllUsers {\n    getAllUsers {\n      _id\n      username\n      pfp\n    }\n  }\n"]);return c=function(){return e},e}function u(){let e=(0,s._)(["\n  query GetLoggedInUser {\n    getLoggedInUser {\n      _id\n      username\n      firstName\n      lastName\n      bio\n      pfp\n      email\n      posts {\n        _id\n        title\n        preview\n      }\n      followers {\n        _id\n      }\n      following {\n        _id\n      }\n    }\n  }\n"]);return u=function(){return e},e}function m(){let e=(0,s._)(["\n  query GetUserById($userId: ID!) {\n    getUserById(userId: $userId) {\n      _id\n      username\n      firstName\n      lastName\n      bio\n      pfp\n      email\n      posts {\n        _id\n        title\n        body\n        preview\n        user {\n          _id\n          username\n          email\n        }\n      }\n      likes {\n        _id\n        post {\n          _id\n          preview\n        }\n      }\n      followers {\n        _id\n      }\n      following {\n        _id\n      }\n    }\n  }\n"]);return m=function(){return e},e}let x=(0,r.Ps)(o());(0,r.Ps)(a());let h=(0,r.Ps)(i()),p=(0,r.Ps)(l());(0,r.Ps)(d());let f=(0,r.Ps)(c());(0,r.Ps)(u());let g=(0,r.Ps)(m())},4893:function(e,n,t){var s=t(9268);n.Z=e=>{let{handleClose:n,users:t}=e;return console.log(t),(0,s.jsxs)("div",{className:"fixed z-10 inset-0 overflow-y-auto duration-200 ease-in-out flex items-center justify-center",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black opacity-90 duration-200 transition-all ease-in-out","aria-hidden":"true"}),(0,s.jsx)("div",{className:"inline-block align-bottom bg-white dark:bg-coolGray rounded-lg overflow-hidden shadow-xl transform transition-all",children:(0,s.jsxs)("div",{className:"w-[24vw]",children:[(0,s.jsxs)("div",{className:"flex justify-between border-black pb-2 border-b-[2px] p-2",children:[(0,s.jsx)("h1",{className:"text-black text-center text-lg font-semibold dark:text-white",children:"Likes"}),(0,s.jsxs)("button",{onClick:n,className:"ml-auto bg-transparent border-0 dark:text-white text-black",children:[(0,s.jsx)("span",{className:"sr-only",children:"Close"}),(0,s.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]}),(0,s.jsx)("div",{className:"p-2 overflow-y-scroll max-h-[36vh]",children:t.map((e,n)=>(0,s.jsxs)("div",{className:"flex justify-between border-gray-700 border-b-[1px]",children:[(0,s.jsxs)("div",{className:"flex items-center ",children:[(0,s.jsx)("img",{className:"h-10 w-10 rounded-full object-cover",src:e.user.pfp,alt:"Your Company"}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("h4",{className:"text-black text-md ml-1 dark:text-white",children:[e.user.firstName," ",e.user.lastName]}),(0,s.jsxs)("a",{href:"#",className:"text-gray-500 text-md ml-1","aria-current":"page",children:["@",e.user.username]})]})]}),(0,s.jsx)("div",{className:"my-auto",children:(0,s.jsx)("button",{className:" font-semibold  text-neonBlue p-[1px] pl-2 pr-2 rounded-md",children:"Follow"})})]},n))})]})})]})}},7908:function(e,n,t){var s=t(9268),r=t(4893),o=t(6006),a=t(9390),i=t(909),l=t(1051),d=t(7251),c=t(1816),u=t(5846),m=t.n(u);n.Z=e=>{let n,{postId:t,handleClose:u}=e,{loading:x,error:h,data:p}=(0,l.a)(i.QI,{variables:{postId:t}});console.log(t),console.log(p);let[f,g]=(0,o.useState)(!1),[b,w]=(0,o.useState)([]),[k,v]=(0,o.useState)(!1),[N,_]=(0,o.useState)(),[y,{data:j,loading:I,error:P}]=(0,d.D)(a.ns),[$,C]=(0,o.useState)(!1),[A,{loading:S,error:L,data:D}]=(0,d.D)(a.xx),[U,{data:T}]=(0,d.D)(a.Bv),[B,{data:M}]=(0,d.D)(a.OU),[Z,{data:q}]=(0,d.D)(a.xR);function G(e){let n=new Date(parseInt(e)),t=n.getMonth()+1,s=n.getDate(),r=n.getHours(),o=n.getMinutes(),a=o<10?"0".concat(o):"".concat(o);return"".concat(t,"/").concat(s," ").concat(r,":").concat(a)}let E=async()=>{try{if(c.Z.loggedIn()){if(k){console.log("is liked");let e=await U({variables:{postId:t,userId:c.Z.getProfile().data._id}});console.log(p.getPost.likes),console.log(e.data.unlikePost),w(n=>n.filter(n=>n._id!==e.data.unlikePost._id))}else{console.log("isnt liked");let e=await A({variables:{postId:t,userId:c.Z.getProfile().data._id}});console.log(p.getPost.likes),console.log(e.data.likePost),w(n=>[...n,e.data.likePost])}v(e=>!e)}else alert("Sign into like a post")}catch(e){console.error(e)}},W=async e=>{e.preventDefault();try{if(c.Z.loggedIn()){let n=e.target,s=n.form[0].value;if(s){console.log(s),console.log(t);let e=await y({variables:{username:c.Z.getProfile().data.username,body:s,postId:t}});console.log(e)}else alert("The comment cant be blank");n.form[0].value=""}else alert("Sign in to make a comment")}catch(e){console.error(e)}};return(0,o.useEffect)(()=>{let e=async()=>{try{if(n=p.getPost.media.endsWith(".mp4"),console.log(p),_(p.getPost.comments),console.log(p.getPost.likes),c.Z.loggedIn()){let e=p.getPost.likes.some(e=>e.user._id===c.Z.getProfile().data._id);console.log(e),v(e)}else v(!1);w(p.getPost.likes)}catch(e){console.error(e)}};p&&e()},[p]),(0,s.jsx)(s.Fragment,{children:p&&(0,s.jsxs)("div",{className:"fixed z-50 inset-0 overflow-y-auto duration-200 ease-in-out flex items-center justify-center",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black opacity-90 duration-200 transition-all ease-in-out","aria-hidden":"true"}),(0,s.jsx)("div",{className:"inline-block align-bottom bg-white dark:bg-coolGray rounded-lg overflow-hidden shadow-xl transform transition-all",children:(0,s.jsxs)("div",{className:"p-2",children:[(0,s.jsxs)("div",{className:"flex justify-between border-gray-700 pb-2 border-b-[1px]",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(m(),{href:"/profile/".concat(p.getPost.user._id),children:(0,s.jsx)("img",{className:"h-10 w-10 rounded-full object-cover",src:p.getPost.user.pfp,alt:"Your Company"})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("h4",{className:"text-black text-lg ml-1 dark:text-white",children:"".concat(p.getPost.user.firstName," ").concat(p.getPost.user.lastName)}),(0,s.jsxs)("a",{href:"#",className:"text-gray-500 text-md ml-1","aria-current":"page",children:["@",p.getPost.user.username]})]})]}),(0,s.jsxs)("button",{onClick:u,className:"ml-auto bg-transparent border-0 dark:text-white text-black",children:[(0,s.jsx)("span",{className:"sr-only",children:"Close"}),(0,s.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})]}),(0,s.jsxs)("div",{className:"border-gray-700 pb-2 border-b-[1px]",children:[(0,s.jsx)("h1",{className:"text-2xl mt-2 text-center text-black dark:text-white ",children:p.getPost.title}),(0,s.jsx)("h2",{className:"mt-2 text-black dark:text-white",children:p.getPost.body}),(0,s.jsx)("div",{className:"",children:p.getPost.hashtags.map((e,n)=>(0,s.jsxs)("span",{className:"text-gray-500",children:["#",e.hashtagText]},n))}),n?(0,s.jsxs)("video",{className:"w-[100%] max-h-[50vh] max-w-[55vw] mt-2 border-[1px] border-gray-600 rounded-xl",controls:!0,children:[(0,s.jsx)("source",{src:p.getPost.media,type:"video/mp4"}),"Your browser does not support the video tag."]}):(0,s.jsx)("img",{src:p.getPost.media,className:"w-auto max-h-[50vh] max-w-[55vw] object-contain mt-2 border-[1px] border-gray-600 rounded-xl"})]}),(0,s.jsxs)("div",{className:"".concat(f?"h-46 scale-100":" h-0 scale-0"," transition-all duration-400 ease-in-out"),children:[(0,s.jsx)("form",{className:"".concat(f?"scale-100":"scale-0"," ease-in transition-all duration-200 border-black pb-2 border-b-[2px]"),children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("textarea",{placeholder:"Leave a comment, (200 characters max)",className:"bg-transparent border-solid border-customPurple text-black dark:text-white border-[1px] outline-none w-[75%] h-16 max-h-16"}),(0,s.jsx)("button",{className:"ml-2 mr-2 px-4 py-2 mt-2 border border-customPurple rounded-md h-10 self-end shadow-sm text-sm font-medium text-black dark:text-white bg-transparent hover:bg-indigo-700 transition duration-300 hover:scale-105",onClick:e=>W(e),children:"Comment"})]})}),N&&(0,s.jsx)("div",{className:" mt-2 border-[2px] h-36 max-w-[40vw] rounded-xl overflow-y-scroll p-2 border-black",children:N.map((e,n)=>(0,s.jsxs)("div",{className:"flex justify-between border-gray-700 pb-2 border-b-[1px]",children:[(0,s.jsx)("p",{className:"dark:text-white transition-all duration-500 ease-in-out w-[75%] text-black self-end",children:e.body}),(0,s.jsx)("p",{children:G(e.createdAt)}),(0,s.jsxs)("a",{className:"dark:text-white transition-all duration-500 ease-in-out text-black cursor-pointer self-end",children:["-",e.username]})]},n))})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("button",{type:"button",className:"rounded-full p-1 text-customPurpleDark dark:text-white ",children:[(0,s.jsx)("span",{className:"sr-only",children:"Like"}),(0,s.jsx)("svg",{onClick:()=>E(),xmlns:"http://www.w3.org/2000/svg",fill:k?"red":"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})})]}),(0,s.jsx)("a",{className:"text-gray-700 text-sm dark:text-gray-500 cursor-pointer mr-2",onClick:()=>{b.length?C(!0):alert("Post doesn't have any likes")},children:b?"".concat(b.length," Likes"):"0 Likes"}),(0,s.jsxs)("button",{onClick:()=>g(e=>!e),className:" text-blue-500 hover:text-blue-700",children:[(0,s.jsx)("span",{className:"sr-only",children:"Comment"}),(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 01-.923 1.785A5.969 5.969 0 006 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337z"})})]}),(0,s.jsx)("a",{onClick:()=>g(e=>!e),className:"text-gray-700 text-sm dark:text-gray-500 cursor-pointer mr-2",children:N?N.length:"0"}),(0,s.jsxs)("button",{type:"button",className:"rounded-full mr-2 p-1 text-customPurpleDark dark:text-white",children:[(0,s.jsx)("span",{className:"sr-only",children:"Share"}),(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})})]})]}),(0,s.jsxs)("h2",{className:"mt-1 text-black dark:text-white",children:["Posted on: ",G(p.getPost.createdAt)]})]})]})}),$&&(0,s.jsx)(r.Z,{handleClose:function(){C(!1)},users:b})]})})}}}]);