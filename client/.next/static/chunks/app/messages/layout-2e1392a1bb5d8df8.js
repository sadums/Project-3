(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[294],{2133:function(e,n,r){Promise.resolve().then(r.bind(r,9457)),Promise.resolve().then(r.bind(r,9596)),Promise.resolve().then(r.bind(r,2678)),Promise.resolve().then(r.t.bind(r,7848,23)),Promise.resolve().then(r.t.bind(r,4109,23))},1816:function(e,n,r){"use strict";var t=r(3535),s=r.n(t);let a=new class{isClientSide(){return!0}getProfile(){let e=this.getToken();if(e)try{return s()(e)}catch(e){console.error("Error decoding the token:",e)}return null}loggedIn(){let e=this.getToken();return!!e&&!this.isTokenExpired(e)}isTokenExpired(e){try{let n=s()(e);if(n.exp<Date.now()/1e3)return!0;return!1}catch(e){return!1}}getToken(){return this.isClientSide()?localStorage.getItem("id_token"):null}login(e){this.isClientSide()&&(localStorage.setItem("id_token",e),window.location.assign("/"))}logout(){this.isClientSide()&&(localStorage.removeItem("id_token"),window.location.assign("/"))}};n.Z=a},909:function(e,n,r){"use strict";r.d(n,{L5:function(){return g},Nw:function(){return h},QI:function(){return p},Rx:function(){return f},hl:function(){return x}});var t=r(2805),s=r(7056);function a(){let e=(0,t._)(["\n  query Query($userId: ID!) {\n    getUserChats(userId: $userId) {\n      _id\n      username\n      chats {\n        _id\n        members {\n          _id\n          username\n          pfp\n          firstName\n          lastName\n        }\n        messages {\n          userId\n          createdAt\n          body\n          _id\n        }\n      }\n    }\n  }\n"]);return a=function(){return e},e}function i(){let e=(0,t._)(["\n  query Query($chatId: ID!) {\n    getChatById(chatId: $chatId) {\n      members {\n        _id\n        username\n      }\n      createdAt\n      messages {\n        body\n        createdAt\n        userId\n        _id\n      }\n    }\n  }\n"]);return i=function(){return e},e}function o(){let e=(0,t._)(["\n  query GetAllPosts {\n    getAllPosts {\n      _id\n      preview\n      title\n      body\n      createdAt\n      comments {\n        _id\n        body\n        username\n        createdAt\n      }\n      user {\n        _id\n        pfp\n        firstName\n        lastName\n        username\n        email\n        followers{\n          _id\n        }\n      }\n      likes {\n        _id\n        user {\n          _id\n          pfp\n          firstName\n          lastName\n          username\n        }\n        post {\n          _id\n          preview\n        }\n      }\n      hashtags {\n        hashtagText\n        category\n      }\n    }\n  }\n"]);return o=function(){return e},e}function l(){let e=(0,t._)(["\n  query GetPost($postId: ID!) {\n    getPost(postId: $postId) {\n      _id\n      preview\n      media\n      title\n      body\n      createdAt\n      comments {\n        _id\n        body\n        username\n        createdAt\n      }\n      user {\n        _id\n        pfp\n        firstName\n        lastName\n        username\n        email\n      }\n      likes {\n        _id\n        user {\n          _id\n          pfp\n          firstName\n          lastName\n          username\n        }\n        post {\n          _id\n          preview\n        }\n      }\n      hashtags {\n        hashtagText\n        category\n      }\n    }\n  }\n"]);return l=function(){return e},e}function c(){let e=(0,t._)(["\n  query GetAllUsers {\n    getAllUsers {\n      _id\n      username\n      firstName\n      lastName\n      pfp\n      posts {\n        _id\n        title\n        preview\n        body\n        hashtags {\n          hashtagText\n          category\n        }\n        likes {\n          _id\n          username\n          pfp\n          firstName\n          lastName\n          preview\n        }\n        comments {\n          _id\n          body\n          username\n          createdAt\n        }\n        createdAt\n      }\n      followers {\n        _id\n      }\n      following {\n        _id\n      }\n    }\n  }\n"]);return c=function(){return e},e}function d(){let e=(0,t._)(["\n  query GetAllUsers {\n    getAllUsers {\n      _id\n      username\n      pfp\n    }\n  }\n"]);return d=function(){return e},e}function u(){let e=(0,t._)(["\n  query GetLoggedInUser {\n    getLoggedInUser {\n      _id\n      username\n      firstName\n      lastName\n      bio\n      pfp\n      email\n      posts {\n        _id\n        title\n        preview\n      }\n      followers {\n        _id\n      }\n      following {\n        _id\n      }\n    }\n  }\n"]);return u=function(){return e},e}function m(){let e=(0,t._)(["\n  query GetUserById($userId: ID!) {\n    getUserById(userId: $userId) {\n      _id\n      username\n      firstName\n      lastName\n      bio\n      pfp\n      email\n      posts {\n        _id\n        title\n        body\n        preview\n        user {\n          _id\n          username\n          email\n        }\n      }\n      likes {\n        _id\n        post {\n          _id\n          preview\n        }\n      }\n      followers {\n        _id\n      }\n      following {\n        _id\n      }\n    }\n  }\n"]);return m=function(){return e},e}let f=(0,s.Ps)(a());(0,s.Ps)(i());let h=(0,s.Ps)(o()),p=(0,s.Ps)(l());(0,s.Ps)(c());let x=(0,s.Ps)(d());(0,s.Ps)(u());let g=(0,s.Ps)(m())},9457:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return a}});var t=r(9268),s=r(6006);function a(){let[e,n]=(0,s.useState)(""),[r,a]=(0,s.useState)(""),[i,o]=(0,s.useState)(""),[l,c]=(0,s.useState)(""),[d,u]=(0,s.useState)("");return(0,t.jsx)("form",{children:(0,t.jsx)("div",{className:"flex",children:(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsx)("input",{type:"search",id:"search-dropdown",className:"rounded-xl block p-2.5 w-full z-20 text-sm text-white bg-transparent rounded-r-lg border-l-customPurple border-l-2 border border-customPurple focus:ring-transparent focus:border-blue-500 dark:bg-gray-700 dark:border-l-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:border-blue-500",placeholder:"Any Hashtag...",required:!0}),(0,t.jsxs)("button",{type:"submit",className:"absolute top-0 right-0 p-2.5 text-sm font-medium h-full text-white bg-customPurple rounded-r-lg border border-customPurple hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-customPurple dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:[(0,t.jsx)("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})}),(0,t.jsx)("span",{className:"sr-only",children:"Search"})]})]})})})}},9596:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return d}});var t=r(9268),s=r(6006),a=function(e){let{text:n,date:r}=e;return(0,t.jsx)("div",{className:"flex justify-start mt-2",children:(0,t.jsxs)("div",{className:"max-w-[60%]",children:[(0,t.jsx)("h1",{className:"border-0 rounded-tl-3xl rounded-tr-3xl leading-tight rounded-bl-none rounded-br-3xl pr-4 pl-4 p-2 bg-green-500 dark:bg-green-700 dark:text-white text-black text-md",children:n}),(0,t.jsx)("div",{className:"flex justify-start mt-1",children:(0,t.jsx)("h1",{className:"text-xs text-gray-500",children:r?"".concat(r):""})})]})})},i=function(e){let{text:n,date:r}=e;return(0,t.jsx)("div",{className:"flex justify-end mt-2",children:(0,t.jsxs)("div",{className:"max-w-[60%]",children:[(0,t.jsx)("h1",{className:"border-0 leading-tight rounded-tl-3xl rounded-tr-3xl rounded-bl-3xl rounded-br-none p-2 pr-4 pl-4 bg-blue-400 dark:bg-blue-700 dark:text-white text-black text-md",children:n}),(0,t.jsx)("div",{className:"flex justify-end mt-1",children:(0,t.jsx)("h1",{className:"text-xs text-gray-500",children:r?"".concat(r):""})})]})})},o=function(e){let{firstInfoText:n,secondInfoText:r}=e,[i,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{setTimeout(()=>{o(!0)},200),setTimeout(()=>{c(!0)},650)},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"".concat(i?"w-100 opacity-1 translate-x-0":"w-0 opacity-0 translate-x-[-20px]"," ease-in-out duration-200"),children:(0,t.jsx)(a,{date:"",text:n})}),(0,t.jsx)("div",{className:"".concat(l?"w-100 opacity-1 translate-x-0":"w-0 opacity-0 translate-x-[-20px]"," ease-in-out duration-200"),children:(0,t.jsx)(a,{date:"",text:r})})]})},l=function(e){let{type:n,pfp:r,username:s,firstname:a,lastname:i}=e;return"none"===n?(0,t.jsx)("div",{className:"w-[full] h-16 bg-black"}):"user"===n?(0,t.jsx)("div",{className:"absolute align-center min-w-[192px] max-w-xs mt-4 ml-4 rounded-xl shadow-2xl dark:notificationShadowPink cursor-pointer dark:bg-opacity-90 bg-opacity-90 bg-darkestWhite dark:bg-darkModeDarkGray p-2",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("a",{className:"cursor-pointer",children:(0,t.jsx)("img",{src:r,className:"h-12 w-12 rounded-full object-cover border-customPurple border-2"})}),(0,t.jsxs)("div",{className:"items-center  align-center h-full",children:[(0,t.jsx)("h2",{className:"text-md cursor-pointer text-black font-semibold dark:text-white ml-1",children:"".concat(a," ").concat(i)}),(0,t.jsx)("div",{children:(0,t.jsxs)("a",{href:"#",className:"text-gray-600 dark:text-gray-500 cursor-pointer text-md ml-1 py-2","aria-current":"page",children:["@",s]})})]})]})}):void 0},c=function(e){let{user:n,convo:r,date:s}=e;return(0,t.jsx)(t.Fragment,{children:(()=>{let e={firstname:"John",lastname:"Doe"};return n?r[0]?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l,{type:"user",pfp:n.pfp,username:n.username,firstname:e.firstname,lastname:e.lastname}),(0,t.jsx)("div",{className:"w-[100%] p-2 overflow-y-scroll friendListMessages pt-20 pb-40 h-[97vh]",children:r.map((e,n)=>!0===e.speaker?(0,t.jsx)(i,{date:e.date,text:e.message},n):!1===e.speaker?(0,t.jsx)(a,{date:e.date,text:e.message},n):void 0)})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l,{type:"user",pfp:n.pfp,username:n.username,firstname:n.firstName,lastname:n.lastName}),(0,t.jsx)("div",{className:"w-[100%] p-2 overflow-y-scroll friendListMessages pt-20 pb-32 h-[97vh]",children:(0,t.jsx)(o,{firstInfoText:"This chat is empty!",secondInfoText:"Select a user to chat with, or send a message."})})]}):(0,t.jsx)("div",{className:"w-[100%] p-2 overflow-y-scroll friendListMessages pt-20 pb-32 h-[97vh]",children:(0,t.jsx)(o,{firstInfoText:"Welcome to the messaging page!",secondInfoText:"Looks like you aren't currently talking to anyone, select a user to chat with."})})})()})};function d(){let[e,n]=(0,s.useState)(!1),[r,a]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if(e){let e=setTimeout(()=>{a(!0)},200);return()=>{clearTimeout(e),a(!1)}}},[e]),(0,t.jsxs)("div",{className:"col-span-5 border-mainDarkPurple dark:border-mainPurple border-l-2 border-r-2 h-[97vh]",children:[(0,t.jsxs)("div",{className:"relative w-full flex flex-col ",children:[(0,t.jsx)(c,{user:{firstName:"",lastName:"",username:"",pfp:""},convo:[],date:""}),(0,t.jsx)("div",{className:"".concat(e?"hidden":"block"," absolute bottom-0 flex w-40 p-2 mb-6 ml-4 rounded-xl bg-opacity-90 dark:bg-opacity-90 bg-darkestWhite dark:bg-darkModeDarkGray ease-in-out duration-150 translate"),children:(0,t.jsxs)("button",{onClick:()=>n(!e),className:"z-20 cursor-pointer flex justify-between items-center h-10 px-4 mt-6 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 transition duration-300",children:[(0,t.jsx)("h1",{className:"text-lg mr-5 text-white",children:"Chat"}),(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:" top-2 right-2 w-4 h-4 text-white",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 19.5l15-15m0 0H8.25m11.25 0v11.25"})})]})})]}),(0,t.jsx)("div",{className:"absolute bottom-0 transition-all duration-100 ease-in-out ".concat(e?"h-40 bg-darkestWhite bg-opacity-80 dark:bg-darkModeDarkGray dark:bg-opacity-80 w-full":"h-16 bg-transparent dark:bg-opacity-70 bg-opacity-70 w-[80%]"),children:(0,t.jsxs)("div",{className:"".concat(e?"block":"hidden"," transition-all ease-in-out duration-300"),children:[(0,t.jsxs)("div",{className:"flex justify-between p-2",children:[(0,t.jsx)("h1",{className:"text-black dark:text-white pl-2",children:"Your Message"}),(0,t.jsx)("button",{onClick:()=>n(!e),className:"text-black dark:text-white",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),r&&(0,t.jsx)("div",{className:"pl-2 pr-2 pb-2",children:(0,t.jsxs)("form",{className:"w-full flex relative transition-all",children:[(0,t.jsx)("textarea",{placeholder:"Your Message, 280 max characters",className:"rounded-lg max-h-28 p-1 w-[80%] min-h-16 h-20 outline-none bg-white dark:bg-darkModeDarkGray text-black dark:text-white text-sm"}),(0,t.jsx)("button",{className:"rounded-full bottom-0 mb-0 ml-2 mt-10 h-10 w-10 bg-mainPurple dark:bg-mainPurple flex justify-center items-center hover:scale-110 hover:bg-blue-800 ease-in-out duration-100",children:(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7 transform rotate-[-35deg]",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})})})]})})]})})]})}},2678:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return d}});var t=r(9268),s=r(5846),a=r.n(s),i=function(e){let{username:n,firstname:r,lastname:s,pfp:i}=e;return(0,t.jsx)(a(),{href:"/Messages/".concat(n),className:"align-center mt-1 shadow-2xl rounded-lg cursor-pointer bg-white dark:bg-darkModeDarkGray p-2 duration-150 ease-in-out scale-95 hover:scale-100",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)("a",{className:"cursor-pointer",children:(0,t.jsx)("img",{src:i,className:"h-12 w-12 rounded-full object-cover border-customPurple border-2"})}),(0,t.jsxs)("div",{className:"items-center  align-center h-full",children:[(0,t.jsx)("h2",{className:"text-md cursor-pointer text-black font-semibold dark:text-white ml-1",children:"".concat(r," ").concat(s)}),(0,t.jsx)("div",{children:(0,t.jsxs)("a",{href:"#",className:"text-gray-500 cursor-pointer text-md ml-1 py-2","aria-current":"page",children:["@",n]})})]})]})})},o=r(1816),l=r(909),c=r(1051);function d(){var e;let n=o.Z.getProfile(),r=null==n?void 0:null===(e=n.data)||void 0===e?void 0:e._id;if(!r)return(0,t.jsx)("div",{children:"Error: No user ID found"});let{error:s,loading:a,data:d}=(0,c.a)(l.Rx,{variables:{userId:r}}),u=[];try{for(let e in d.getUserChats.chats)for(let n in d.getUserChats.chats[e].members){let r=d.getUserChats.chats[e].members[n];o.Z.getProfile().data._id!==r._id&&u.push({username:r.username,firstname:r.firstName,lastname:r.lastName,id:r._id,pfp:r.pfp})}}catch(e){console.log(e)}return(0,t.jsx)("div",{children:u.map((e,n)=>(0,t.jsx)(i,{username:e.username,firstname:e.firstname,lastname:e.lastname,pfp:e.pfp},n))})}},4109:function(){},7848:function(){},5086:function(e,n,r){"use strict";var t,s;function a(e){return!!e&&e<7}r.d(n,{I:function(){return t},O:function(){return a}}),(s=t||(t={}))[s.loading=1]="loading",s[s.setVariables=2]="setVariables",s[s.fetchMore=3]="fetchMore",s[s.refetch=4]="refetch",s[s.poll=6]="poll",s[s.ready=7]="ready",s[s.error=8]="error"},9580:function(e,n,r){"use strict";r.d(n,{MS:function(){return o},YG:function(){return a},cA:function(){return c},ls:function(){return i}});var t=r(8466);r(3393);var s=r(3620),a=Symbol();function i(e){return!!e.extensions&&Array.isArray(e.extensions[a])}function o(e){return e.hasOwnProperty("graphQLErrors")}var l=function(e){var n=(0,t.ev)((0,t.ev)((0,t.ev)([],e.graphQLErrors,!0),e.clientErrors,!0),e.protocolErrors,!0);return e.networkError&&n.push(e.networkError),n.map(function(e){return(0,s.s)(e)&&e.message||"Error message not found."}).join("\n")},c=function(e){function n(r){var t=r.graphQLErrors,s=r.protocolErrors,a=r.clientErrors,i=r.networkError,o=r.errorMessage,c=r.extraInfo,d=e.call(this,o)||this;return d.name="ApolloError",d.graphQLErrors=t||[],d.protocolErrors=s||[],d.clientErrors=a||[],d.networkError=i||null,d.message=o||l(d),d.extraInfo=c,d.__proto__=n.prototype,d}return(0,t.ZT)(n,e),n}(Error)},5606:function(e,n,r){"use strict";r.d(n,{O:function(){return s},k:function(){return t}});var t=Array.isArray;function s(e){return Array.isArray(e)&&e.length>0}},2190:function(e,n,r){"use strict";function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Object.create(null);return e.forEach(function(e){e&&Object.keys(e).forEach(function(n){var t=e[n];void 0!==t&&(r[n]=t)})}),r}r.d(n,{o:function(){return t}})},8059:function(e,n,r){"use strict";r.d(n,{J:function(){return s}}),r(3393);var t=r(3620);function s(e){if(__DEV__){var n;(n=new Set([e])).forEach(function(e){(0,t.s)(e)&&function(e){if(__DEV__&&!Object.isFrozen(e))try{Object.freeze(e)}catch(e){if(e instanceof TypeError)return null;throw e}return e}(e)===e&&Object.getOwnPropertyNames(e).forEach(function(r){(0,t.s)(e[r])&&n.add(e[r])})})}return e}},4455:function(e,n,r){"use strict";r.d(n,{J:function(){return a}});var t=r(8466),s=r(2190);function a(e,n){return(0,s.o)(e,n,n.variables&&{variables:(0,t.pi)((0,t.pi)({},e&&e.variables),n.variables)})}},3620:function(e,n,r){"use strict";function t(e){return null!==e&&"object"==typeof e}r.d(n,{s:function(){return t}})}},function(e){e.O(0,[454,797,357,253,961,744],function(){return e(e.s=2133)}),_N_E=e.O()}]);