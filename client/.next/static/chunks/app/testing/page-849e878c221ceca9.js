(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[547],{2425:function(n,o,i){Promise.resolve().then(i.bind(i,9469))},9469:function(n,o,i){"use strict";i.r(o),i.d(o,{default:function(){return p}});var e=i(9268),t=i(3393),r=i(6006),l=i(9551),u=i(3844),s=i(6776),a=i(2805),c=i(7056);function d(){let n=(0,a._)(["\n  subscription messages {\n    messages {\n      body\n      userId\n    }\n  }\n"]);return d=function(){return n},n}let v=(0,c.Ps)(d());function p(){var n,o,i,a,c,d,p,b,f,h,m;let{data:D,loading:_,error:S}=(n={variables:{chatId:"64cc0f97ded45e7f731940fb",userId:"64c847e9ed40b6f2b1c10ebd"}},o=(0,r.useRef)(!1),i=(0,s.x)(null==n?void 0:n.client),(0,u.Vp)(v,u.n_.Subscription),c=(a=(0,r.useState)({loading:!(null==n?void 0:n.skip),error:void 0,data:void 0,variables:null==n?void 0:n.variables}))[0],d=a[1],!o.current&&(o.current=!0,(null==n?void 0:n.onSubscriptionData)&&__DEV__&&t.kG.warn(n.onData?"'useSubscription' supports only the 'onSubscriptionData' or 'onData' option, but not both. Only the 'onData' option will be used.":"'onSubscriptionData' is deprecated and will be removed in a future major version. Please use the 'onData' option instead."),(null==n?void 0:n.onSubscriptionComplete)&&__DEV__&&t.kG.warn(n.onComplete?"'useSubscription' supports only the 'onSubscriptionComplete' or 'onComplete' option, but not both. Only the 'onComplete' option will be used.":"'onSubscriptionComplete' is deprecated and will be removed in a future major version. Please use the 'onComplete' option instead.")),b=(p=(0,r.useState)(function(){return(null==n?void 0:n.skip)?null:i.subscribe({query:v,variables:null==n?void 0:n.variables,fetchPolicy:null==n?void 0:n.fetchPolicy,context:null==n?void 0:n.context})}))[0],f=p[1],h=(0,r.useRef)(!1),(0,r.useEffect)(function(){return function(){h.current=!0}},[]),m=(0,r.useRef)({client:i,subscription:v,options:n}),(0,r.useEffect)(function(){var o,e,t,r,u=null==n?void 0:n.shouldResubscribe;"function"==typeof u&&(u=!!u(n)),(null==n?void 0:n.skip)?(!(null==n?void 0:n.skip)!=!(null===(o=m.current.options)||void 0===o?void 0:o.skip)||h.current)&&(d({loading:!1,data:void 0,error:void 0,variables:null==n?void 0:n.variables}),f(null),h.current=!1):(!1!==u&&(i!==m.current.client||v!==m.current.subscription||(null==n?void 0:n.fetchPolicy)!==(null===(e=m.current.options)||void 0===e?void 0:e.fetchPolicy)||!(null==n?void 0:n.skip)!=!(null===(t=m.current.options)||void 0===t?void 0:t.skip)||!(0,l.D)(null==n?void 0:n.variables,null===(r=m.current.options)||void 0===r?void 0:r.variables))||h.current)&&(d({loading:!0,data:void 0,error:void 0,variables:null==n?void 0:n.variables}),f(i.subscribe({query:v,variables:null==n?void 0:n.variables,fetchPolicy:null==n?void 0:n.fetchPolicy,context:null==n?void 0:n.context})),h.current=!1),Object.assign(m.current,{client:i,subscription:v,options:n})},[i,v,n,h.current]),(0,r.useEffect)(function(){if(b){var o=!1,e=b.subscribe({next:function(e){if(!o){var t,r,l={loading:!1,data:e.data,error:void 0,variables:null==n?void 0:n.variables};d(l),(null===(t=m.current.options)||void 0===t?void 0:t.onData)?m.current.options.onData({client:i,data:l}):(null===(r=m.current.options)||void 0===r?void 0:r.onSubscriptionData)&&m.current.options.onSubscriptionData({client:i,subscriptionData:l})}},error:function(i){var e,t;o||(d({loading:!1,data:void 0,error:i,variables:null==n?void 0:n.variables}),null===(t=null===(e=m.current.options)||void 0===e?void 0:e.onError)||void 0===t||t.call(e,i))},complete:function(){var n,i;!o&&((null===(n=m.current.options)||void 0===n?void 0:n.onComplete)?m.current.options.onComplete():(null===(i=m.current.options)||void 0===i?void 0:i.onSubscriptionComplete)&&m.current.options.onSubscriptionComplete())}});return function(){o=!0,setTimeout(function(){e.unsubscribe()})}}},[b]),c);return(console.log(_),_)?(0,e.jsx)("p",{children:"Loading..."}):S?(0,e.jsxs)("p",{className:"",children:["Error: ",S.message]}):(console.log(D),(0,e.jsx)("p",{children:"DATA:"}))}}},function(n){n.O(0,[454,797,253,961,744],function(){return n(n.s=2425)}),_N_E=n.O()}]);